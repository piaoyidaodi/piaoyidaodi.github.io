---
layout: post
title: "《Java编程思想》笔记--关键概念"
categories: Thinking-In-Java-Note
tag: Core-Java
---
> `java`中一些重要的概念，如我菜，可能混淆。

### 1.方法重载

1. 生活中，相同的词可以表达多种不同的含义——他们被**重载**了。**方法重载**解决了相同方法名相同概念的方法的命名问题。
- 构造器是一种特殊类型的方法，因为它没有返回值，且与返回值为`void`方法明显不同。
- 为了让方法名相同而形式参数不同的构造器同时存在，因此必须用到**方法重载**。
2. 区分重载的规则：每个重载的方法都必须有一个**独一无二的参数类型列表**。
3. 基本类型作为参数重载：传入数据类型小于方法中声明的形参类型，实际数据类型会提升，`char`直接提升为`int`。

### 2.清理：终结处理和垃圾回收

1. `finalize()`并非`C++`中的析构函数。在`Java`中：对象可能不被垃圾回收；垃圾回收并不等于“析构”；垃圾回收只与内存有关。
2. `finalize()`主要使用在**本地方法**情况。

### 3.初始化

#### 3.1 成员初始化

`Java`尽力保证：所有的变量在使用前都能得到恰当的初始化。对于方法的局部变量，以编译错误的形式来贯彻。

#### 3.2 构造器初始化

1. **无法阻止自动初始化的进行**，它将在构造器被调用之前发生。
2. 在类的内部，**变量定义的先后顺序**决定了初始化顺序。即使变量定义散布于方法定义之间，它们仍旧会在**任何方法（包括构造器）被调用之前得到初始化**。
3. 无论创建多少个对象，静态数据都只占用**一份存储区域**。`static`关键字不能应用于局部变量，因此只能作用于域。如果一个域是静态的基本类型域，且没有对它进行初始化，那么它就会获得基本类型的标准初值；如果是一个对象引用，默认初始化值为`null`。
4. 对象创建过程（假设有一个Dog类）：
- 首次创建类型为Dog的对象时（构造器可以看做静态方法），或者Dog类的静态方法/静态域首次被访问时，`Java`解释器必须查找类路径，以定位`Dog.class`文件。
- 然后载入`Dog.class`，有关静态初始化的所有动作都会执行。**静态初始化只在Class对象首次加载时进行一次**。
- 当用`new Dog()`创建对象时，首先将在堆上为`Dog`对象分配足够的存储空间。
- **存储空间会被清零**，此时`Dog`对象内所有的**基本类型设为默认值，引用则被设置成了`null`**。
- **执行所有出现于字段定义处的初始化动作**。
- 执行构造器。

#### 3.3 数组初始化

1. 数组只是相同类型的、用一个标识符名称封装到一起的一个对象序列或基本类型数据序列。
2. 编译器不允许指定数组的大小；对于数组，初始化动作可以在代码的任何地方，但是对于**初始化表达式出现在创建数组的地方**，存储空间的分配等价于使用`new`，即编译器负责。
3. 基本类型数组可以使用`new`（不能使用`new`创建单个基本类型数组）；如果创建了一个非基本类型的数组，就创建了一个引用数组。